# ISP Runtime

This directory contains resources for building and running standalone ISP applications.
Included are scripts for building and installing kernels, compiling applications, and running the supported simulators.

### How to Install

To install kernels to the current install directory (as specified by `ISP_PREFIX`), run `make kernels`.
To install the `isp_build_app` and `isp_run_app` commands, run `make`.

### Usage

The two main interfaces for using the ISP runtime are `isp_build_app` and `isp_run_app`.

##### Building an application

To build an application, run the command `isp_build_app source_dir`, where `source_dir` is the directory containing the source code of the target application.
Inside of the source directory, all source code should be located in a subdirectory named `srcs/`.
This script generates a `build` directory in the current working directory by default. To change this directory, use the `-o` flag.
The default runtime is `hifive`, but `frtos` is also supported. Use the `-r` option to change the runtime.

##### Running an application

To run an application, run the command `isp_run_app build_dir policy`, where `build_dir` is the directory containing the `build` subdirectory generated by `isp_build_app` and `policy` is the policy to run.
By default, this script generates runtime artifacts in the current working directory. To generate these files elsewhere, use the `-o` flag.
The current supported policies are `none`, `heap`, `rwx`, `stack`, `threeClass`, and `heap-rwx-stack-threeClass`.
The default runtime is `hifive`, but `frtos` is also supported. Use the `-r` option to change the runtime.
The default simulator is `qemu`, but `renode` is also supported. Use the `-s` option to change the simulator.

##### Cleaning Up

To delete build and runtime artifacts, append the `-c` flag to the `isp_build_app` and `isp_run_app` commands, respectively.
